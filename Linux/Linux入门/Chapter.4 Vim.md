
# vim的三种工作模式
使用 Vim 编辑文件时，存在 3 种工作模式，分别是命令模式、输入模式和编辑模式，这 3 种工作模式可随意切换，
![](http://c.biancheng.net/uploads/allimg/181008/2-1Q00Q41T01J.jpg)

## vim命令模式
使用 Vim 编辑文件时，默认处于命令模式。此模式下，可使用方向键（上、下、左、右键）或 k、j、h、i 移动光标的位置，还可以对文件内容进行复制、粘贴、替换、删除等操作。
## vim输入模式
在输入模式下，Vim 可以对文件执行写操作，类似于在 Windows 系统的文档中输入内容。

快捷键|功能描述
------|--------
i|在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动
I|在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行 i 命令
o|在光标所在行的下面插入新的一行。光标停在空行首，等待输入文本
O|在光标所在行的上面插入新的一行。光标停在空行的行首，等待输入文本
a|在当前光标所在位置之后插入随后输入的文本
A|在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾再执行a命令

## vim编辑模式
编辑模式用于对文件中的指定内容执行保存、查找或替换等操作。使 Vim 切换到编辑模式的方法是在命令模式状态下按“：”键，此时 Vim 窗口的左下方出现一个“：”符号，这是就可以输入相关指令进行操作了。

# vim基本操作

## vim打开文件
命令格式：
```bash
[root@itxdl ~]# vim /test/vi.test
```
vim打开文件的快捷键

vi使用的选项|说明
------------|----
vim filename|打开或新建一个文件，并将光标置于第一行的首部
vim -r filename|恢复上次 vim 打开时崩溃的文件
vim -R filename|把指定的文件以只读方式放入 Vim 编辑器中
vim + filename|打开文件，并将光标置于最后一行的首部
vi +n filename|打开文件，并将光标置于第 n 行的首部
vi +/pattern filename|打幵文件，并将光标置于第一个与 pattern 匹配的位置
vi -c command filename|在对文件进行编辑前，先执行指定的命令

## 使用vim进行编辑
### vim插入文本
快捷键|功能描述
------|--------
i|在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动
I|在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行 i 命令
o|在光标所在行的下面插入新的一行。光标停在空行首，等待输入文本
O|在光标所在行的上面插入新的一行。光标停在空行的行首，等待输入文本
a|在当前光标所在位置之后插入随后输入的文本
A|在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾再执行 a 命令

### vim查找文本
快捷键|功能描述
------|--------
/abc|从光标所在位置向前查找字符串 abc
/^abc|查找以 abc 为行首的行
/abc$|查找以 abc 为行尾的行
?abc|从光标所在为主向后查找字符串 abc
n|向同一方向重复上次的查找指令
N|向相反方向重复上次的查找指定

### 替换文本
快捷键|功能描述
------|--------
r|替换光标所在位置的字符
R|从光标所在位置开始替换字符，其输入内容会覆盖掉后面等长的文本内容，按“Esc”可以结束
:s/a1/a2/g|将当前光标所在行中的所有 a1 用 a2 替换
:n1,n2s/a1/a2/g|将文件中 n1 到 n2 行中所有 a1 都用 a2 替换
:g/a1/a2/g|将文件中所有的 a1 都用 a2 替换

### 删除文本
快捷键|功能描述
------|--------
x|删除光标所在位置的字符
dd|删除光标所在行
ndd|删除当前行（包括此行）后 n 行文本
dG|删除光标所在行一直到文件末尾的所有内容
D|删除光标位置到行尾的内容
:a1,a2d|函数从 a1 行到 a2 行的文本内容

### 复制文本
快捷键|功能描述
------|--------
p|将剪贴板中的内容复制到光标后
P|将剪贴板中的内容复制到光标前
yy|将光标所在行复制到剪贴板，此命令前可以加数字 n，可复制多行
yw|将光标位置的单词复制到剪贴板

### vim保存退出文本
命令|功能描述
----|-------
:wq|保存并退出 Vim 编辑器
:wq!|保存并强制退出 Vim 编辑器
:q|不保存就退出 Vim 编辑器
:q!|不保存，且强制退出 Vim 编辑器
:w|保存但是不退出 Vim 编辑器
:w!|强制保存文本
:w|filename	另存到 filename 文件
x！|保存文本，并退出 Vim 编辑器，更通用的一个 vim 命令
ZZ|直接退出 Vim 编辑器

# vim移动光标快捷键

## vim快捷方向键
快捷键|功能描述
------|--------
h|光标向左移动一位
j|光标向下移动一行（以回车为换行符），也就是光标向下移动
k|光标向上移动一行（也就是向上移动）
l |光标向右移动一位

## vim光标以单词为单位移动
快捷键|功能描述
------|--------
w 或 W|光标移动至下一个单词的单词首
b 或 B|光标移动至上一个单词的单词首
e 或 E|光标移动至下一个单词的单词尾
nw 或 nW|n 为数字，表示光标向右移动 n 个单词
nb 或 nB|n 为数字，表示光标向左移动 n 个单词

## vim光标移动到行尾或行首
快捷键|功能描述
------|--------
0 或 ^|光标移动至当前行的行首
\$|光标移动至当前行的行尾
n\$|光标移动至当前行只有 n 行的行尾，n为数字

## vim光标移动到指定字符
快捷键|功能描述
------|--------
fx|光标移动至当前行中下一个 x 字符处
Fx|光标移动至当前行中下一个 x 字符处

## vim光标移动到指定行
快捷键|功能描述
------|--------
gg|光标移动到文件开头
G|光标移动至文件末尾
nG|光标移动到第 n 行，n 为数字
:n|编辑模式下使用的快捷键，可以将光标快速定义到指定行的行首

# vim多窗口编辑

1. 先使用 Vim 打开第一个文件，接着输入命 令 ":sp/etc/shadow" 水平切分窗口，然后按回车键；如果想垂直切分窗口则可以输入 ":vs/etc/shadow";
2. 可以直接执行命令"vim -o 第一个文件名 第二个文件名"，也就是 "vim-o /etc/passwd /etc/shadow"。

切换到另一个文件窗口，可以按 "Ctrl+WW" 快捷键。

如果想将一个文件的内容全部复制到另一个文件中，则可以输入命令 ":r 被复制的文件名"，即可将导入文件的全部内容复制到当前光标所在行下面。

# Vim批量注释和自定义注释快捷键

# vim显示行号
设置参数|含义
--------|--
:set nu
:set nonu|设置与取消行号。
:syn on
:syn off|是否依据语法显示相关的颜色帮助。在Vim中修改相关的配置文件或Shell脚本文件 时（如前面示例的脚本/etc/init.d/sshd)，默认会显示相应的颜色，用来帮助排错。如果觉得颜色产生了干扰，则可以取消此设置
set hlsearch
set nohlsearch|设置是否将査找的字符串高亮显示。默认是hlsearch高亮显示
set nobackup
set backup|是否保存自动备份文件。默认是nobackup不自动备份。如果设定了:set backup，则会产生“文件名〜”作为备份文件
set ruler
set noruler|设置是否显示右下角的状态栏。默认是ruler显示
set showmode
set noshowmode|设置是否在左下角显示如“一INSERT--”之类的状态栏。默认是showmode显示

# vim配置文件
Vim 启动时，会根据配置文件（.vimrc）来设置 Vim，因此我们可以通过此文件来定制适合自己的 Vim。

Vim 配置文件分为系统配置文件和用户配置文件：
1. 系统配置文件位于 Vim 的安装目录（默认路径为 /etc/.vimrc）；
2. 用户配置文件位于主目录 ~/.vimrc，即通过执行 vim ~/.vimrc 命令即可对此配置文件进行合理修改。通常情况下，Vim 用户配置文件需要自己手动创建。

vim环境设置参数

设置参数|功能描述
--------|--------
set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936，set termencoding=utf-8，set encoding=utf-8|设置编码格式，encoding 选项用于缓存的文本、寄存器、Vim 脚本文件等；fileencoding 选项是 Vim 写入文件时采用的编码类型；termencoding|选项表示输出到终端时采用的编码类型。
set nu， set number|nu 是 number 的缩写，所以上面两个配置命令是完全等效的，二选一即可。取消行号可使用 set nonu。
set cursorline|突出显示当前行。
set mouse=a， set selection=exclusive， set selectmode=mouse,key|Vim 编辑器里默认是不启用鼠标的，通过此设置即可启动鼠标。
set autoindent|设置自动缩进，即每行的缩进同上一节相同。
set tabstop=4|设置 Tab 键宽度为 4 个空格。


