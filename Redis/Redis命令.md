﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿# Reids命令## 字符串- reids的字符串就是一个由字节组成的序列- 字符串中可以存储以下三种类型的值	- 字节串(byte string)	- 整数：取值范围和系统长整数的取值范围相同	- 浮点数：取值范围和精度与IEEE754标准的双精度浮点数相同- 命令	- **基础命令**		- get：get key，获取给定键中的值		- set：set key value，设置存储在给定键中的值		- del：delete key，删除存储在给定键中的值	- **自增自减命令**		- incr:：incr key-name，将键存储的值加上1（**python中redis库使用incrby命令来实现incr命令**）		- decr：decr key-name，将键存储的值减去1		- incrby：incrby key-name amount，将键存储的值加上整数amount		- decrby：decrby key-name amount，将键存储的值减去整数amount		- incrbyfloat：incrbyfloat key-name amount，将键存储的值加上浮点数amount（Redis 2.6+）	- **处理字符串字串和二进制位的命令		- append：append key-name value，将value追加到给定键key-name当前存储的值的末尾		- getrange：getrange key-name start end，获取一个由偏移量start至偏移量end范围内的所有字符组成的字串，包括start和end在内		- setrange：setrange key-name offset value，将从start偏移量开始的子串设置为给定值		- getbit：getbit key-name offset，将字节串看作是二进制位串，并返回位串中偏移量为offset的二进制的值		- setbit：setbit key-name offset value， 将字节串看作是二进制位串，并将位串中偏移量为offset的二进制的值设置为value		- bitcount：bitcount key-name [start end]，统计二进制位串里面值为1的二进制位的数量，如果给定了可选的start偏移量和end偏移量，那么只对偏移量指定范围内的二进制位进行统计		- bitop：bitop operation dest-key key-name [key-name ...]，对一个或多个二进制位串执行包括并(AND)、或(OR)、异或(XOR)、非(NOT)在内的任意一种按位运算操作，并将计算结果保存在dest-key键里面# 列表- 双端列表- 命令	- **基础命令**		- rpush：rpush key-name value [value ...]，将一个或多个值推入列表的右端		- lpush：lpush key-name value [value ...]，将一个或多个值推入列表的左端		- rpop：rpop key-name，移除并返回列表最右端的元素		- lpop：lpop key-name，移除并返回列表最左端的元素		- lindex：lindex key-name offset，返回列表中偏移量为offset的元素		- lrange：lrange key-name start end，返回列表中从start偏移量到end偏移量范围内的所有元素，其中偏移量为start和偏移量为end的元素也会包含在被返回的元素内		- ltrim：ltrim key-name start end，对列表进行修剪，只保留从start偏移量到end偏移量范围内的元素，其中偏移量为start和偏移量为end的元素也会被保留	- **阻塞式的列表弹出命令以及在列表之间移动元素的命令**		- blpop：blpop key-name [key-name ...] timeout，从第一个非空列表中弹出位于最左端的元素，或者在timeout秒之内阻塞并等待可弹出的元素出现		- brpop：brpop key-name [key-name ..] timout，从第一个非空列表中弹出位于最右端的元素，或者在timeout秒之内阻塞并等待可弹出的元素出现		- rpoplpush：rpoplpush source-key dest-key，从source-key列表中弹出位于最右端的元素，然后将这个元素推入source-key列表的最左端，并向用户返回这个元素		- brpoplpush：brpoplpush source-key dest-key timout，从source-key列表中弹出最右端的元素，然后将这个元素推入dest-key列表的最左端，并向用户返回这个元素；如果source-key为空，那么在timeout秒之内阻塞并等待可弹出的元素出现# 集合- 命令	- **基础命令**		- sadd：sadd key-name item [item ..]，将一个或多个元素添加到集合里面，并返回被添加元素当中原本并不存在与集合里面的元素数量		- srem：srem key-name item [item ..]，从集合里面移除一个或多个元素，并返回被移除元素的数量		- sismember：sismember key-name item，检查元素item是否存在于集合key-nameli		- scard：scard key-name，返回集合包含的元素的数量		- smembers：smembers key-name，返回集合包含的所有元素		- srandmember：srandmember key-name [count]，从集合里面随机返回一个或多个元素。当count为整数时，命令返回的随机元素不会重复；当count为负数时，命令返回的随机元素可能出现重复		- spop：spop key-name，随机地移除集合种的一个元素，并返回被移除的元素		- smove：smove source-key dest-key item，如果集合source-key包含元素item，那么从集合source-key里面移除元素item，并将元素item添加到集合dest-key中；如果item被成功移除，那么命令返回1，否则返回0	- **用于组合和处理多个集合的Redis命令**		- sdiff：sdiff key-name [key-name ..]，返回那些存在于第一个集合，但不存在于其他集合中的元素（数学上的差集运算）		- sdiffstore：seiffstore dest-key key-name [key-name ..]，将那些存在于第一个集合但并不存在于其他集合中的元素存储到dest-key键里面		- sinter：sinter key-name [key-name ..]，返回那些同时存在于所有集合中的元素（数学上的交集运算）		- sinterstore：sinterstore dest-key key-name [key-name ...]，将那些同时存在于所有集合中的元素存储到dest-key键里面		- sunion：sunion key-name [key-name ..]，返回那些至少存在于一个集合中的元素（数学上的并集计算）		- sunionstore：sunionstore dest-key key-name [keyname ...]，将那些至少存在于一个集合中的元素存储到dest-key键里面# 散列表- 命令	- **用于添加和删除键值对的散列操作**		- hmget：hmget key-name key [key ..]，从散列里面获取一个或多个键的值		- hmset：hmset key-name key value [key value ...]，为散列表里面的一个或多个键设置值		- hdel：hdel key-name key [key ...]，删除散列表里面的一个或多个键值对，返回成功找到并删除的键值对数量		- hlen：hlen key-name，返回散列包含的键值对数量	- **展示Redis散列的更高级特性		- hexists：hexists key-name key，检查给定键是否存在于散列中		- hkeys：hkeys key-name，获取散列包含的所有键		- hvals：hvals key-name，获取散列包含的所有值		- hgetall：hgetall key-name，获取散列包含的所有键值对		- hincrbyfloat：hincrbyfloat key-name key increment，将键key存储的值加上浮点数increment # 有序集合- 命令	- **常用命令**		- zadd：zadd key-name score member [score member ...]，将带有给定分值的成员添加到有序集合里面		- zrem：zrem key-name member [member ..]，从有序集合里面移除给定的成员，并返回被移除成员的数量		- zcard：zcard key-name，返回有序集合包含的成员数量		- zincrby：zincrby key-name increment member，将member成员的分值加上increment		- zcount：zcount key-name min max，返回分值介于min和max之间的 成员数量		- zrank：zrank key-name member，返回成员member在有序集合中的排名		- zscore：zscore key-name member，返回成员member的分值		- zrange：zrange key-name start stop [withscores]，返回有序集合中排名介于start和stop之间的成员，如果给定了可选的withscores选项，那么命令会将成员的分值也一并返回	- **有序集合的范围型数据获取命令和范围型数据删除命令，以及并集命令和交集命令**		- zrevrank：zrerank key-name member，返回有序集合里成员member 的排名，成员按照分值从大到小排列		- zrevrange：zrevrange key-name start stop [WITHSCORES]，返回有序集合给定排名范围内的成员，成员按照分值从大到小排列		- zrangebyscore：zrangebyscore key min max [WITHSCORES] [LIMITE offset count]，返回有序集合中，分值介于min和max之间的所有成员		- zrevrangebyscore：zrevrangescore key max min [WITHSCORES] [LIMIT offset count]，获取有序集合中分值介于min和max之间的所有成员，并按照分值从大到小排序来返回他们		- zremrangebyrank：zremrangebyrank key-name start sop，移除有序集合中排名介于start和stop之间的所有成员		- zremrangebyscore：zremrangebyscore key-name min max，移除有序集合中分值介于min和max之间的所有成员		- zinterstore：zinterstore dest-key key-count key [key ..][WEIGHTS weight [weight ...]][AGGREGATE SUM|MIN|MAX]，对给定的有序集合执行类似于集合的交集运算		- zunionstore：zunionstore dest-key key-count key [key ..][WEIGHTS weight [weight ...]][AGGREGATE SUM|MIN|MAX]，对给定的有序集合执行类似于集合的并集运算# 发布和订阅- 订阅者listener负责订阅频道channel，发送者publisher负责向频道发送二进制字符串消息binary string message-  命令，python下命令在conn.pubsub()下	- subscribe：subscribe channel [channel ...]，订阅给定的一个或多个频道	- unsubscribe：unsubscribe channel [channel ..]，退订给定的一个或多个频道，如果执行时没有给定任何频道，那么退订所有频道	- publish：publish channel [channel ...]，向给定频道发送消息	- psubscribe：psubscribe pattern [pattern ...]，订阅与给定模式相匹配的所有频道	- punsubscribe：punsubscribe [pattern [pattern ...]]，退订给定的模式，如果执行时没有给定任何模式，那么退订所有模式# 排序- sort：sort source-key [BY pattern] [LIMIT offset count][GET pattern [ GET pattern ...]][ASC|DESC][ALPHA][STORE dest-key]，根据给定的选项，对输入的列表、集合或者有序集合进行排序，然后返回或者存储排序的结果# 基本Redis事务- Redis的基本事务可以让一个客户端在不被其他客户端打断的情况下执行多个命令- 没有回滚功能，只能将事务中的命令一个一个执行，直到执行结束才能处理其他客户端的命令- Reids事务在Python客户端上面是由流水线（pipeline）实现的：调用pipeline()方法创建一个事务- Reids在接到EXEC命令之后，才会执行位于MULTI和EXEC之间的入队命令- 命令：可以让用户在不被打断的情况下对多个键执行操作	- WATCH	- MULTI	- EXEC	- UNWATCH	- DISCARD# 键的过期时间- 命令	- persist：persist key-name，移除键的过期时间	- ttl：ttl key-name，查看给定键距离过期还有多少秒	- expire：expire key-name seconds：让给定键在指定的秒数后过期	- expireat：expireat key-name timestamp，将给定键的过期时间设置为给定的UNIX时间戳	- pttl：pttl key-name，查看给定键距离过期时间还有多少毫秒	- pexpire：pexpire key-name milliseconds，让给定键在指定的毫秒数之后过期	- pexpireat：pexpireat key-name timestamp-millisecons，将一个毫秒级精度的UNIX时间戳设置为给定键的过期时间